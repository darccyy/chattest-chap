<html>

  <head>
    <title>Chattest Chap</title>
    <link rel="shortcut icon" href="public/svg/favicon.svg" />

    <script src="public/js/jquery.js"></script>
    <script src="public/js/client.js"></script>
    <script defer src="https://use.fontawesome.com/releases/v5.0.3/js/all.js"></script>
    <script defer src="https://use.fontawesome.com/releases/v5.0.3/js/v4-shims.js"></script>

    <link rel="stylesheet" href="public/style/css/style.css" />

    <meta name="description" content="Github API app with Nodejs Server." />
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta type="datakey" name="session" value='{{{json session}}}' />
  </head>

  <body onload="init()">

    <main>

      <div class="top-bar">
        {{#if session}}

        <span class="name">
          {{session.user.name}}
        </span>

        <button onclick="location.href += 'logoff'">
          <i class="fas fa-sign-out-alt"></i>
        </button>

        {{else}}

        <span class="name">
          <a href="/auth/github">Login with GitHub</a>
        </span>

        {{/if}}

        <button onclick="refresh()">
          <i class="fa fa-refresh"></i>
        </button>
      </div>

      {{#if session}}

      <section>
        <input type="text" value="TEST_123" id="msg" autofocus />
        <button onclick="send()">
          <i class="fa fa-arrow-circle-right"></i>
        </button>
      </section>

      {{/if}}

      <div id="msgs"></div>

    </main>

  </body>

  {{!-- Templates, will not show normally --}}
  <components style="display:none;visibility:none;">
    <comp name="msg">
      <article class="msg {self}">
        <wrapper>
          <header>
            <h1>
              {name}
            </h1>
            |
            <code>
              {user}
            </code>
            <icon>
              {icon}
            </icon>
          </header>
          <content>
            {content}
          </content>
        </wrapper>
      </article>
    </comp>
  </components>

</html>